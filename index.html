<!DOCTYPE html>
<html>
  <head>
    <title>MFaria DataVis Assignmnet 1</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
      html {
        margin: 0px;
        height: 100%;
        width: 100%;
      }
      body {
        margin: 0px;
        min-height: 100%;
        width: 100%;
      }
    </style>
  </head>
  
  <body>
  <script>
    console.log(d3); // test if d3 is loaded
    // Add an SVG
    var width = window.innerHeight;
    var height = window.innerHeight;
    var angle = 0;
    var timer;
    var indexA = 0;
    var indexB = -1;
    var hsl = 0;

    const svg = d3.select("body")
      .append("svg")
      .attr("width", width)
      .attr("height", height);
    // Add Rectangles
    d3.select('svg')
      .append('rect')
      .attr("x", width/2)
      .attr("y", 0)
      .attr("width", width/2)
      .attr("height", height/2)
    // Add Circles
    d3.select('svg')
      .append('circle')
      .attr('cx', width/4)
      .attr('cy', height/4)
      .attr('r', width/4)
      .on('click', function(){
        console.log("clicked circle");
        d3.selectAll('circle')
          .transition().duration(0)
          .style('fill','hsl(0, 100%, 50%)')
          .transition().duration(1000)
          .style('fill','hsl(180, 100%, 50%)')
          .transition().delay(1000).duration(1000)
          .style('fill','hsl(360, 100%, 50%)');
      });
    // Add Lines
    d3.select('svg')
      .append('line')
      .attr("x1", width/2)
      .attr("x2", width/2)
      .attr("y1", 0)
      .attr("y2", height)
      .attr("stroke", "green")
      .attr("stroke-width", 4);
    d3.select('svg')
      .append('line')
      .attr("x1", 0)
      .attr("x2", width)
      .attr("y1", height/2)
      .attr("y2", height/2)
      .attr("stroke", "green")
      .attr("stroke-width", 4);
    // Add Polygons
    d3.select('svg')
      .append('polygon')
      .attr('points', 
        [0, height/8+height/2,
        0, 3*height/8+height/2,
        width/8, height,
        3*width/8, height,
        width/2, 3*height/8+height/2,
        width/2, height/8+height/2,
        3*width/8, height/2,
        width/8, height/2]);
    d3.select('svg')
      .append('polygon')
      .attr('id', 'cog')
      .attr('points', 
        [width/2+width/4, height/2+height/8,
        width/2+width/8, height/2,
        width/2, height/2+height/8,
        width/2+width/8, height/2+height/4,
        width/2, height/2+3*height/8,
        width/2+width/8, height,
        width/2+width/4, height/2+3*height/8,
        width/2+3*width/8, height,
        width, height/2+3*height/8,
        width/2+3*width/8, height/2+height/4,
        width, height/2+height/8,
        width/2+3*width/8, height/2])
      .attr('fill', 'gray')
      .on("click", function(){
        console.log("Clicked");
        var x = width/2+width/4;
        var y = height/2+height/4;
        angle += 45;
        d3.selectAll('#cog')
          .attr('transform', 'rotate(' + angle + ',' + x + ',' +  y +')');
      });
    d3.select('svg')
      .append('circle')
      .attr('cx', width/2+width/4)
      .attr('cy', height/2+height/4)
      .attr('r', height/16)
      .attr('fill', 'white');
    
    
  </script>  
  </body>
</html>
